{"ast":null,"code":"var _jsxFileName = \"/home/dell/Desktop/BlockChain/bridge/front-end/src/Components/Transfer.js\",\n    _s = $RefreshSig$();\n\nimport { useState } from 'react';\nimport { BigNumber } from 'bignumber.js';\nimport Bridge from '../contracts/Bridge.json';\nimport { Connect } from './Connect';\nimport { Withdraw } from './Withdraw';\nimport Web3 from 'web3';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const Transfer = props => {\n  _s();\n\n  //   const connect = Connect.web3Connect()\n  //   const withdraw = Withdraw()\n  const [nonce, setNonce] = useState();\n  const [messageHash, setMessageHash] = useState();\n  const [v, setV] = useState();\n  const [r, setR] = useState();\n  const [s, setS] = useState();\n  const [amount, setAmount] = useState(0);\n  const [input, setInput] = useState(false);\n  const [tran_account, setTran_Account] = useState();\n  const [network, setNetwork] = useState();\n  const [loadings, setLoading] = useState(false); // const [account, setAccounts] = useState()\n\n  const bridgeAbi = Bridge.abi; //   const web3 = connect.web3\n\n  const web3 = new Web3(Web3.givenProvider || 'localhost:8545');\n  const bridgeContractEth = new web3.eth.Contract(bridgeAbi, '0x93C11Ea795519DD09175DA5a23f64b32a37Eff2E'); // const bridgeContractBsc = new web3.eth.Contract(\n  //   bridgeAbi,\n  //   '0x1d6E5AD248dbdaEDd51C284b3Bd011e722126a4B',\n  // )\n\n  const handleChange = e => {\n    setAmount(e.target.value);\n  };\n\n  const handleNetwork = async e => {\n    let _network = await web3.eth.net.getNetworkType();\n\n    setNetwork(_network);\n  };\n\n  const code = process.env.REACT_APP_CODE;\n\n  const transferToken = async e => {\n    e.preventDefault();\n\n    try {\n      const accounts = await web3.eth.getAccounts();\n      setTran_Account(accounts[0]);\n      await Connect.onClickConnect;\n\n      if (network !== 'rinkeby') {\n        // setNetwork(undefined)\n        setLoading(true);\n        await bridgeContractEth.methods.transferToken(new BigNumber(amount * 10 ** 18)).send({\n          from: accounts[0]\n        }).then(async response => {\n          let nonce = response.events.transfer.returnValues.nonce;\n          setNonce(nonce);\n          let amount = response.events.transfer.returnValues.amount;\n          let sender = response.events.transfer.returnValues.sender;\n          let data_to_sign = nonce + amount + sender;\n          let signature = web3.eth.accounts.sign(data_to_sign, code);\n          setMessageHash(signature['messageHash']);\n          setV(signature['v']);\n          setR(signature['r']);\n          setS(signature['s']);\n          console.log('Invoke Verifier.verify() with the following arguments:');\n          console.log('messageHash: ' + signature['messageHash']);\n          console.log('v          : ' + signature['v']);\n          console.log('r          : ' + signature['r']);\n          console.log('s          : ' + signature['s']);\n        }); // const _network = await web3.eth.net.getNetworkType()\n        // setNetwork(_network)\n\n        await handleNetwork();\n        setInput(true);\n        setLoading(false);\n      } else {\n        console.log('please change network type to withdraw token on other chain ');\n      } // await getTransferEvent()\n      // console.log('xfvgfvfvbfv', results.events.transfer.returnValues)\n\n    } catch (e) {\n      console.log(e);\n    }\n  };\n\n  const data = {\n    nonce: nonce,\n    messageHash: messageHash,\n    v: v,\n    r: r,\n    s: s,\n    amount: amount,\n    input: input,\n    network: network,\n    loadings: loadings,\n    setLoading: setLoading,\n    tran_account: tran_account\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container\",\n    children: !input ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"row mt-4\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-8\",\n        children: /*#__PURE__*/_jsxDEV(\"form\", {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"amount-id\",\n              children: \"Amount\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 119,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              className: \"form-control\",\n              name: \"\",\n              id: \"amount-id\",\n              \"aria-describedby\": \"helpId\",\n              placeholder: \"\" // value={amount}\n              ,\n              onChange: handleChange,\n              disabled: input\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 120,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 118,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-primary\",\n            onClick: transferToken,\n            children: loadings ? /*#__PURE__*/_jsxDEV(\"svg\", {\n              width: \"135\",\n              height: \"135\",\n              viewBox: \"0 0 135 135\",\n              xmlns: \"http://www.w3.org/2000/svg\",\n              fill: \"#fff\",\n              children: [/*#__PURE__*/_jsxDEV(\"path\", {\n                d: \"M67.447 58c5.523 0 10-4.477 10-10s-4.477-10-10-10-10 4.477-10 10 4.477 10 10 10zm9.448 9.447c0 5.523 4.477 10 10 10 5.522 0 10-4.477 10-10s-4.478-10-10-10c-5.523 0-10 4.477-10 10zm-9.448 9.448c-5.523 0-10 4.477-10 10 0 5.522 4.477 10 10 10s10-4.478 10-10c0-5.523-4.477-10-10-10zM58 67.447c0-5.523-4.477-10-10-10s-10 4.477-10 10 4.477 10 10 10 10-4.477 10-10z\",\n                children: /*#__PURE__*/_jsxDEV(\"animateTransform\", {\n                  attributeName: \"transform\",\n                  type: \"rotate\",\n                  from: \"0 67 67\",\n                  to: \"-360 67 67\",\n                  dur: \"2.5s\",\n                  repeatCount: \"indefinite\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 143,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 142,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n                d: \"M28.19 40.31c6.627 0 12-5.374 12-12 0-6.628-5.373-12-12-12-6.628 0-12 5.372-12 12 0 6.626 5.372 12 12 12zm30.72-19.825c4.686 4.687 12.284 4.687 16.97 0 4.686-4.686 4.686-12.284 0-16.97-4.686-4.687-12.284-4.687-16.97 0-4.687 4.686-4.687 12.284 0 16.97zm35.74 7.705c0 6.627 5.37 12 12 12 6.626 0 12-5.373 12-12 0-6.628-5.374-12-12-12-6.63 0-12 5.372-12 12zm19.822 30.72c-4.686 4.686-4.686 12.284 0 16.97 4.687 4.686 12.285 4.686 16.97 0 4.687-4.686 4.687-12.284 0-16.97-4.685-4.687-12.283-4.687-16.97 0zm-7.704 35.74c-6.627 0-12 5.37-12 12 0 6.626 5.373 12 12 12s12-5.374 12-12c0-6.63-5.373-12-12-12zm-30.72 19.822c-4.686-4.686-12.284-4.686-16.97 0-4.686 4.687-4.686 12.285 0 16.97 4.686 4.687 12.284 4.687 16.97 0 4.687-4.685 4.687-12.283 0-16.97zm-35.74-7.704c0-6.627-5.372-12-12-12-6.626 0-12 5.373-12 12s5.374 12 12 12c6.628 0 12-5.373 12-12zm-19.823-30.72c4.687-4.686 4.687-12.284 0-16.97-4.686-4.686-12.284-4.686-16.97 0-4.687 4.686-4.687 12.284 0 16.97 4.686 4.687 12.284 4.687 16.97 0z\",\n                children: /*#__PURE__*/_jsxDEV(\"animateTransform\", {\n                  attributeName: \"transform\",\n                  type: \"rotate\",\n                  from: \"0 67 67\",\n                  to: \"360 67 67\",\n                  dur: \"8s\",\n                  repeatCount: \"indefinite\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 153,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 152,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 135,\n              columnNumber: 19\n            }, this) : 'transferToken'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 133,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(Withdraw, {\n      data: data\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 113,\n    columnNumber: 5\n  }, this);\n}; // export async function addNetwork(id) {\n//     let networkData;\n//     switch (id) {\n//       //bsctestnet\n//       case 97:\n//         networkData = [\n//           {\n//             chainId: \"0x61\",\n//             chainName: \"BSCTESTNET\",\n//             rpcUrls: [\"https://data-seed-prebsc-1-s1.binance.org:8545\"],\n//             nativeCurrency: {\n//               name: \"BINANCE COIN\",\n//               symbol: \"BNB\",\n//               decimals: 18,\n//             },\n//             blockExplorerUrls: [\"https://testnet.bscscan.com/\"],\n//           },\n//         ];\n//         break;\n//       //bscmainet\n//       case 56:\n//         networkData = [\n//           {\n//             chainId: \"0x38\",\n//             chainName: \"BSCMAINET\",\n//             rpcUrls: [\"https://bsc-dataseed1.binance.org\"],\n//             nativeCurrency: {\n//               name: \"BINANCE COIN\",\n//               symbol: \"BNB\",\n//               decimals: 18,\n//             },\n//             blockExplorerUrls: [\"https://testnet.bscscan.com/\"],\n//           },\n//         ];\n//         break;\n//       default:\n//         break;\n//     }\n//     // agregar red o cambiar red\n//     return window.ethereum.request({\n//       method: \"wallet_addEthereumChain\",\n//       params: networkData,\n//     });\n//   }\n\n_s(Transfer, \"HLmVWucXatnPbVxBymTJ9/k7TsQ=\");\n\n_c = Transfer;\n\nvar _c;\n\n$RefreshReg$(_c, \"Transfer\");","map":{"version":3,"sources":["/home/dell/Desktop/BlockChain/bridge/front-end/src/Components/Transfer.js"],"names":["useState","BigNumber","Bridge","Connect","Withdraw","Web3","Transfer","props","nonce","setNonce","messageHash","setMessageHash","v","setV","r","setR","s","setS","amount","setAmount","input","setInput","tran_account","setTran_Account","network","setNetwork","loadings","setLoading","bridgeAbi","abi","web3","givenProvider","bridgeContractEth","eth","Contract","handleChange","e","target","value","handleNetwork","_network","net","getNetworkType","code","process","env","REACT_APP_CODE","transferToken","preventDefault","accounts","getAccounts","onClickConnect","methods","send","from","then","response","events","transfer","returnValues","sender","data_to_sign","signature","sign","console","log","data"],"mappings":"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","sourcesContent":["import { useState } from 'react'\nimport { BigNumber } from 'bignumber.js'\nimport Bridge from '../contracts/Bridge.json'\nimport { Connect } from './Connect'\nimport { Withdraw } from './Withdraw'\nimport Web3 from 'web3'\n\nexport const Transfer = (props) => {\n  //   const connect = Connect.web3Connect()\n  //   const withdraw = Withdraw()\n  const [nonce, setNonce] = useState()\n  const [messageHash, setMessageHash] = useState()\n  const [v, setV] = useState()\n  const [r, setR] = useState()\n  const [s, setS] = useState()\n  const [amount, setAmount] = useState(0)\n  const [input, setInput] = useState(false)\n  const [tran_account, setTran_Account] = useState()\n\n  const [network, setNetwork] = useState()\n  const [loadings, setLoading] = useState(false)\n  // const [account, setAccounts] = useState()\n\n  const bridgeAbi = Bridge.abi\n  //   const web3 = connect.web3\n  const web3 = new Web3(Web3.givenProvider || 'localhost:8545')\n\n  const bridgeContractEth = new web3.eth.Contract(\n    bridgeAbi,\n    '0x93C11Ea795519DD09175DA5a23f64b32a37Eff2E',\n  )\n  // const bridgeContractBsc = new web3.eth.Contract(\n  //   bridgeAbi,\n  //   '0x1d6E5AD248dbdaEDd51C284b3Bd011e722126a4B',\n  // )\n  const handleChange = (e) => {\n    setAmount(e.target.value)\n  }\n  const handleNetwork = async (e) => {\n    let _network = await web3.eth.net.getNetworkType()\n    setNetwork(_network)\n  }\n\n  const code = process.env.REACT_APP_CODE\n\n  const transferToken = async (e) => {\n    e.preventDefault()\n\n    try {\n      const accounts = await web3.eth.getAccounts()\n      setTran_Account(accounts[0])\n      await Connect.onClickConnect\n      if (network !== 'rinkeby') {\n        // setNetwork(undefined)\n        setLoading(true)\n        await bridgeContractEth.methods\n          .transferToken(new BigNumber(amount * 10 ** 18))\n          .send({ from: accounts[0] })\n          .then(async (response) => {\n            let nonce = response.events.transfer.returnValues.nonce\n            setNonce(nonce)\n            let amount = response.events.transfer.returnValues.amount\n            let sender = response.events.transfer.returnValues.sender\n\n            let data_to_sign = nonce + amount + sender\n            let signature = web3.eth.accounts.sign(data_to_sign, code)\n            setMessageHash(signature['messageHash'])\n            setV(signature['v'])\n            setR(signature['r'])\n            setS(signature['s'])\n\n            console.log(\n              'Invoke Verifier.verify() with the following arguments:',\n            )\n            console.log('messageHash: ' + signature['messageHash'])\n            console.log('v          : ' + signature['v'])\n            console.log('r          : ' + signature['r'])\n            console.log('s          : ' + signature['s'])\n          })\n        // const _network = await web3.eth.net.getNetworkType()\n        // setNetwork(_network)\n        await handleNetwork()\n\n        setInput(true)\n        setLoading(false)\n      } else {\n        console.log(\n          'please change network type to withdraw token on other chain ',\n        )\n      }\n\n      // await getTransferEvent()\n      // console.log('xfvgfvfvbfv', results.events.transfer.returnValues)\n    } catch (e) {\n      console.log(e)\n    }\n  }\n  const data = {\n    nonce: nonce,\n    messageHash: messageHash,\n    v: v,\n    r: r,\n    s: s,\n    amount: amount,\n    input: input,\n    network: network,\n    loadings: loadings,\n    setLoading: setLoading,\n    tran_account: tran_account,\n  }\n\n  return (\n    <div className=\"container\">\n      {!input ? (\n        <div className=\"row mt-4\">\n          <div className=\"col-8\">\n            <form>\n              <div className=\"form-group\">\n                <label htmlFor=\"amount-id\">Amount</label>\n                <input\n                  type=\"text\"\n                  className=\"form-control\"\n                  name=\"\"\n                  id=\"amount-id\"\n                  aria-describedby=\"helpId\"\n                  placeholder=\"\"\n                  // value={amount}\n                  onChange={handleChange}\n                  disabled={input}\n                />\n              </div>\n\n              <button className=\"btn btn-primary\" onClick={transferToken}>\n                {loadings ? (\n                  <svg\n                    width=\"135\"\n                    height=\"135\"\n                    viewBox=\"0 0 135 135\"\n                    xmlns=\"http://www.w3.org/2000/svg\"\n                    fill=\"#fff\"\n                  >\n                    <path d=\"M67.447 58c5.523 0 10-4.477 10-10s-4.477-10-10-10-10 4.477-10 10 4.477 10 10 10zm9.448 9.447c0 5.523 4.477 10 10 10 5.522 0 10-4.477 10-10s-4.478-10-10-10c-5.523 0-10 4.477-10 10zm-9.448 9.448c-5.523 0-10 4.477-10 10 0 5.522 4.477 10 10 10s10-4.478 10-10c0-5.523-4.477-10-10-10zM58 67.447c0-5.523-4.477-10-10-10s-10 4.477-10 10 4.477 10 10 10 10-4.477 10-10z\">\n                      <animateTransform\n                        attributeName=\"transform\"\n                        type=\"rotate\"\n                        from=\"0 67 67\"\n                        to=\"-360 67 67\"\n                        dur=\"2.5s\"\n                        repeatCount=\"indefinite\"\n                      />\n                    </path>\n                    <path d=\"M28.19 40.31c6.627 0 12-5.374 12-12 0-6.628-5.373-12-12-12-6.628 0-12 5.372-12 12 0 6.626 5.372 12 12 12zm30.72-19.825c4.686 4.687 12.284 4.687 16.97 0 4.686-4.686 4.686-12.284 0-16.97-4.686-4.687-12.284-4.687-16.97 0-4.687 4.686-4.687 12.284 0 16.97zm35.74 7.705c0 6.627 5.37 12 12 12 6.626 0 12-5.373 12-12 0-6.628-5.374-12-12-12-6.63 0-12 5.372-12 12zm19.822 30.72c-4.686 4.686-4.686 12.284 0 16.97 4.687 4.686 12.285 4.686 16.97 0 4.687-4.686 4.687-12.284 0-16.97-4.685-4.687-12.283-4.687-16.97 0zm-7.704 35.74c-6.627 0-12 5.37-12 12 0 6.626 5.373 12 12 12s12-5.374 12-12c0-6.63-5.373-12-12-12zm-30.72 19.822c-4.686-4.686-12.284-4.686-16.97 0-4.686 4.687-4.686 12.285 0 16.97 4.686 4.687 12.284 4.687 16.97 0 4.687-4.685 4.687-12.283 0-16.97zm-35.74-7.704c0-6.627-5.372-12-12-12-6.626 0-12 5.373-12 12s5.374 12 12 12c6.628 0 12-5.373 12-12zm-19.823-30.72c4.687-4.686 4.687-12.284 0-16.97-4.686-4.686-12.284-4.686-16.97 0-4.687 4.686-4.687 12.284 0 16.97 4.686 4.687 12.284 4.687 16.97 0z\">\n                      <animateTransform\n                        attributeName=\"transform\"\n                        type=\"rotate\"\n                        from=\"0 67 67\"\n                        to=\"360 67 67\"\n                        dur=\"8s\"\n                        repeatCount=\"indefinite\"\n                      />\n                    </path>\n                  </svg>\n                ) : (\n                  'transferToken'\n                )}\n              </button>\n            </form>\n          </div>\n        </div>\n      ) : (\n        <Withdraw data={data} />\n      )}\n    </div>\n  )\n}\n\n// export async function addNetwork(id) {\n\n//     let networkData;\n\n//     switch (id) {\n\n//       //bsctestnet\n\n//       case 97:\n\n//         networkData = [\n\n//           {\n\n//             chainId: \"0x61\",\n\n//             chainName: \"BSCTESTNET\",\n\n//             rpcUrls: [\"https://data-seed-prebsc-1-s1.binance.org:8545\"],\n\n//             nativeCurrency: {\n\n//               name: \"BINANCE COIN\",\n\n//               symbol: \"BNB\",\n\n//               decimals: 18,\n\n//             },\n\n//             blockExplorerUrls: [\"https://testnet.bscscan.com/\"],\n\n//           },\n\n//         ];\n\n//         break;\n\n//       //bscmainet\n\n//       case 56:\n\n//         networkData = [\n\n//           {\n\n//             chainId: \"0x38\",\n\n//             chainName: \"BSCMAINET\",\n\n//             rpcUrls: [\"https://bsc-dataseed1.binance.org\"],\n\n//             nativeCurrency: {\n\n//               name: \"BINANCE COIN\",\n\n//               symbol: \"BNB\",\n\n//               decimals: 18,\n\n//             },\n\n//             blockExplorerUrls: [\"https://testnet.bscscan.com/\"],\n\n//           },\n\n//         ];\n\n//         break;\n\n//       default:\n\n//         break;\n\n//     }\n\n//     // agregar red o cambiar red\n\n//     return window.ethereum.request({\n\n//       method: \"wallet_addEthereumChain\",\n\n//       params: networkData,\n\n//     });\n\n//   }\n"]},"metadata":{},"sourceType":"module"}